{"version":3,"sources":["components/RuleList.js","pages/Rules.js","components/CreateUpdateRuleForm.js","pages/CreateUpdateRule.js","pages/Users.js","components/RegionSelector.js","components/CountrySelector.js","components/MarketSelector.js","components/IssuerSegmentationSelector.js","components/LangSelector.js","components/CreateUpdateUserForm.js","pages/CreateUpdateUser.js","pages/Contents.js","pages/ConfigureContentRules.js","context/UserContext.js","pages/SimulateUserSession.js","App.js","index.js"],"names":["RuleList","region","lazy","search","clickAction","useState","rules","setRules","keyword","setKeyword","loading","setLoading","history","useHistory","useEffect","colorMaps","length","a","url","process","params","regions","Axios","get","data","message","error","flex","style","padding","background","size","allowClear","placeholder","value","onChange","e","target","active","paragraph","rows","marginTop","map","item","onClick","_id","push","key","bordered","width","hoverable","display","title","fontSize","color","conditionMatchType","conditions","condition","attribute","RightCircleOutlined","inValues","index","Title","Typography","Rules","type","level","strong","PlusOutlined","Text","Option","Select","CreateUpdateRuleForm","filteredData","setTitle","matchType","setMatchType","selectedRegions","setSelectedRegions","selectedMarkets","setSelectedMarkets","selectedCountries","setSelectedCountries","selectedLanguages","setSelectedLanguages","selectedIssuerSegmentations","setSelectedIssuerSegmentations","mode","filterOption","optionFilterProp","optionLabelProp","label","Group","options","optionType","buttonStyle","markets","values","issuerSegmentations","countries","languages","CreateUpdateRule","useParams","submitting","setSubmitting","setData","setFilteredData","init","initFormData","rule","langCondition","find","marketCondition","segCondition","countryCondition","filter","indexOf","onRegionSelect","country","onCountrySelect","handleSubmit","body","put","success","post","className","onBack","subTitle","spinning","float","disabled","Users","users","setUsers","to","shape","src","image","name","lang","market","issuerSegmentation","avatar","RegionSelector","setRegion","setRegions","CountrySelector","setCountry","setCountries","MarketSelector","setMarket","setMarkets","IssuerSegmentationSelector","setIssuerSegmentation","setIssuerSegmentations","LangSelector","setLang","langs","setLangs","CreateUpdateUserForm","props","setName","prefix","UserOutlined","CreateUpdateUser","user","span","Contents","showCreateModal","setShowCreateModal","showUpdateModal","setShowUpdateModal","contents","setContents","contentTitle","setContentTitle","currentContent","setCurrentContent","handleCreate","handleUpdate","updated","content","actions","SettingOutlined","EditOutlined","visible","okText","onOk","onCancel","ConfigureContentRules","setContent","updatingRules","setUpdatingRules","setSearch","setLazy","onRuleSelect","newRuleId","ruleIds","warn","onRuleRemove","ruleToRemove","updateRuleMatchType","ruleMatchType","extra","minHeight","orientation","dataSource","renderItem","Item","icon","DeleteOutlined","FundViewOutlined","status","checkedChildren","unCheckedChildren","height","overflowY","UserContext","React","createContext","UserProvider","children","setUser","Provider","SimulateUserSession","useContext","userList","setUserList","textAlign","showSearch","input","option","toLowerCase","selected","gutter","Header","Layout","Content","Footer","App","localStorage","getItem","accepted","setAccepted","notification","warning","duration","description","setItem","onClose","location","useLocation","theme","selectedKeys","pathname","UsergroupAddOutlined","ScheduleOutlined","PicLeftOutlined","LoginOutlined","href","GithubOutlined","backgroundColor","path","paddingTop","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.55860f3f.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Axios from 'axios';\nimport { message, Row, Col, Skeleton, Card, Tag, Input } from 'antd';\nimport { RightCircleOutlined } from '@ant-design/icons'\nimport { useHistory } from 'react-router';\nconst RuleList = ({ region, lazy = false, search, clickAction=null }) => {\n  const [rules, setRules] = useState();\n  const [keyword, setKeyword] = useState();\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    if (search) {\n      setKeyword(search)\n    }\n  }, [search])\n  const colorMaps = {\n    'country': 'orange',\n    'lang': 'green',\n    'market': 'blue',\n    'issuerSegmentation': 'purple'\n  }\n  useEffect(() => {\n    if (!lazy || (lazy && keyword && keyword.length > 2)) {\n      (async () => {\n        let url = `${process.env.REACT_APP_API_URL}/rules`;\n        let params = {};\n        if (region) {\n          params.regions = region\n        }\n        if (keyword) {\n          params.keyword = keyword\n        }\n        try {\n          setLoading(true)\n          const { data } = await Axios.get(url, { params: params });\n          setRules(data)\n          setLoading(false)\n        } catch (e) {\n          setLoading(false)\n          message.error(e.message, 3)\n        }\n      })()\n    }\n  }, [region, lazy, keyword]);\n  const handleClick = (_id) => {\n    if (clickAction) {\n      clickAction(_id)\n    } else {\n      history.push('/rules/update/'+_id)\n    }\n  }\n  return (\n    <>\n      <Row>\n        <Col flex=\"1\" style={{ padding: 25, background: '#ececec' }}>\n          {\n            lazy\n              ? <Input size=\"large\" allowClear placeholder=\"Type something...\" value={keyword} onChange={e => setKeyword(e.target.value)} />\n              : ''\n          }\n            {\n              loading ?\n                <>\n                  <Skeleton active paragraph={{ rows: 2 }} />\n                  <Skeleton active paragraph={{ rows: 2 }} />\n                  <Skeleton active paragraph={{ rows: 2 }} />\n                  <Skeleton active paragraph={{ rows: 2 }} />\n                </>\n                : ''\n            }\n            <div style={{ marginTop: 20 }}>\n              {\n                rules && !loading\n                  ? rules.map(\n                    item => <Card onClick={()=> handleClick(item._id)} key={item._id} bordered style={{ width: '100%', marginTop: 20 }}\n                      hoverable>\n                      <Row>\n                        <Col flex=\"1\">\n                          <h2 style={{ display: 'inline-block' }}>\n                            {item.title}\n                          </h2>\n                        </Col>\n                        <Col flex=\"4\">\n                          <Tag style={{ fontSize: 20 }} color=\"gold\">Match Type : <strong>{item.conditionMatchType}</strong></Tag>\n                          <Tag style={{ fontSize: 20 }} color=\"magenta\">REGIONS : <strong>{item.regions.map(region => ' ' + region.title)}</strong></Tag>\n                          {\n                            item.conditions.map((condition) => {\n                              return <Tag style={{ fontSize: 20 }} key={condition.attribute} color={colorMaps[condition.attribute]}>\n                                {condition.attribute}  <RightCircleOutlined />\n                                <strong>\n                                  {condition.inValues.map((value, index) => `${index > 0 ? ' | ' : '  '}` + value.title)}\n                                </strong>\n                              </Tag>\n                            })\n                          }\n                        </Col>\n                      </Row>\n\n                    </Card>\n                  )\n                  : ''\n              }\n            </div>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default RuleList\n","import React from 'react'\nimport { Row, Col, Typography, Button } from 'antd'\nimport { PlusOutlined } from '@ant-design/icons'\nimport { useHistory } from 'react-router';\nimport RuleList from '../components/RuleList';\nconst { Title } = Typography;\n\nconst Rules = () => {\n  const history = useHistory()\n  return (\n    <>\n      <Row>\n        <Col flex=\"1\" style={{ padding: 25, background: '#ececec' }}>\n          <Title type=\"primary\" level={1} strong>Rules</Title>\n          <br />\n          <Button size=\"large\" type=\"primary\" onClick={() => history.push('/rules/create')}>\n            <PlusOutlined /> Create Rule\n          </Button>\n          <RuleList></RuleList>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default Rules\n","import React from 'react'\nimport { Skeleton, Typography, Input, Select, Radio } from 'antd';\nconst { Text } = Typography;\nconst { Option } = Select;\n\nconst CreateUpdateRuleForm = ({\n  loading,\n  data,\n  filteredData,\n  title, setTitle,\n  matchType, setMatchType,\n  selectedRegions, setSelectedRegions,\n  selectedMarkets, setSelectedMarkets,\n  selectedCountries, setSelectedCountries,\n  selectedLanguages, setSelectedLanguages,\n  selectedIssuerSegmentations, setSelectedIssuerSegmentations,\n}) => {\n\n  return (\n    <>\n      {\n        loading\n          ? <Skeleton active paragraph={{ rows: 12 }} />\n          : ''\n      }\n      {data\n        ? <>\n          <Text type=\"primary\" strong>Title</Text>\n          <Input style={{ width: '100%' }} value={title} onChange={e => setTitle(e.target.value)} size=\"large\" placeholder=\"Enter Title\" />\n          <br />\n          <Text type=\"primary\" strong>Available in Regions</Text>\n          <Select\n            value={selectedRegions}\n            onChange={regions => setSelectedRegions(regions)}\n            mode=\"multiple\"\n            size=\"large\"\n            filterOption\n            optionFilterProp=\"label\"\n            placeholder=\"Select Regions\"\n            style={{ width: '100%' }}\n            optionLabelProp=\"label\"\n          >\n            {\n              data.regions.map(item => {\n                return <Option key={item._id} value={item._id} label={item.title}>{item.title}</Option>\n              })\n            }\n          </Select>\n          <h3 style={{marginTop: \"10px\"}}>Configure Conditions</h3>\n          <Text type=\"primary\" strong>Match Type</Text>\n          <br />\n          <Radio.Group\n            options={[{ label: 'Match All', value: 'ALL' }, { label: 'Match Any', value: 'ANY' }]}\n            onChange={e=> setMatchType(e.target.value)}\n            value={matchType}\n            optionType=\"button\"\n            buttonStyle=\"solid\"\n          />\n          <br />\n          <Text type=\"primary\" strong>Markets</Text>\n          <Select\n            value={selectedMarkets}\n            onChange={(markets) => setSelectedMarkets(markets)}\n            mode=\"multiple\"\n            filterOption\n            optionFilterProp=\"label\"\n            size=\"large\"\n            placeholder=\"Select Markets\"\n            style={{ width: '100%' }}\n            optionLabelProp=\"label\"\n          >\n            {\n              filteredData && filteredData.markets && filteredData.markets.map(item => {\n                return <Option key={item._id} value={item._id} label={item.title}>{item.title}</Option>\n              })\n            }\n          </Select>\n          <Text type=\"primary\" strong>Issuer Segmentations</Text>\n          <Select\n            value={selectedIssuerSegmentations}\n            onChange={values => setSelectedIssuerSegmentations(values)}\n            mode=\"multiple\"\n            size=\"large\"\n            placeholder=\"Select Segmentations\"\n            style={{ width: '100%' }}\n            filterOption\n            optionFilterProp=\"label\"\n            optionLabelProp=\"label\"\n          >\n            {\n              filteredData && filteredData.issuerSegmentations && filteredData.issuerSegmentations.map(item => {\n                return <Option key={item._id} value={item._id} label={item.title}>{item.title}</Option>\n              })\n            }\n          </Select>\n          <Text type=\"primary\" strong>Countries</Text>\n          <Select\n            mode=\"multiple\"\n            size=\"large\"\n            placeholder=\"Select Countries\"\n            style={{ width: '100%' }}\n            value={selectedCountries}\n            onChange={countries => setSelectedCountries(countries)}\n            filterOption\n            optionFilterProp=\"label\"\n            optionLabelProp=\"label\"\n          >\n            {\n              filteredData && filteredData.countries && filteredData.countries.map(item => {\n                return <Option key={item._id} value={item._id} label={item.title}>{item.title}</Option>\n              })\n            }\n          </Select>\n          <Text type=\"primary\" strong>Languages</Text>\n          <Select\n            value={selectedLanguages}\n            onChange={languages => setSelectedLanguages(languages)}\n            mode=\"multiple\"\n            size=\"large\"\n            placeholder=\"Select Languages\"\n            style={{ width: '100%' }}\n            optionLabelProp=\"label\"\n            filterOption\n            optionFilterProp=\"label\"\n          >\n            {\n              filteredData && filteredData.languages && filteredData.languages.map(item => {\n                return <Option key={item._id} value={item._id} label={item.title}>{item.title}</Option>\n              })\n            }\n          </Select>\n        </>\n        : ''\n      }\n    </>\n  )\n}\n\nexport default CreateUpdateRuleForm\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react'\nimport Axios from 'axios'\nimport { message, Row, Col, Card, Space, Button, Spin, PageHeader } from 'antd';\nimport CreateUpdateRuleForm from '../components/CreateUpdateRuleForm';\nimport { useHistory, useParams } from 'react-router';\n\nconst CreateUpdateRule = () => {\n  const history = useHistory()\n  const { _id } = useParams()\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [data, setData] = useState();\n  const [filteredData, setFilteredData] = useState({});\n  const [selectedRegions, setSelectedRegions] = useState([]);\n  const [selectedMarkets, setSelectedMarkets] = useState([]);\n  const [selectedCountries, setSelectedCountries] = useState([]);\n  const [selectedLanguages, setSelectedLanguages] = useState([]);\n  const [selectedIssuerSegmentations, setSelectedIssuerSegmentations] = useState([]);\n  const [title, setTitle] = useState();\n  const [matchType, setMatchType] = useState('ALL');\n  const init = async () => {\n    setLoading(true);\n    try {\n      const { data: regions } = await Axios.get(`${process.env.REACT_APP_API_URL}/regions`);\n      const { data: markets } = await Axios.get(`${process.env.REACT_APP_API_URL}/markets`);\n      const { data: issuerSegmentations } = await Axios.get(`${process.env.REACT_APP_API_URL}/issuer-segmentations`);\n      const { data: countries } = await Axios.get(`${process.env.REACT_APP_API_URL}/countries`);\n      const { data: languages } = await Axios.get(`${process.env.REACT_APP_API_URL}/languages`);\n      setData({ regions, markets, issuerSegmentations, countries, languages })\n      if (_id) {\n        initFormData()\n      }\n      setLoading(false)\n    } catch (e) {\n      setLoading(false)\n      message.error(e.message, 3)\n    }\n\n  }\n  const initFormData = async () => {\n    const { data: rule } = await Axios.get(`${process.env.REACT_APP_API_URL}/rules/${_id}`);\n    setTitle(rule.title);\n    setMatchType(rule.conditionMatchType);\n    const langCondition = rule.conditions.find(condition => condition.attribute === 'lang')\n    if (langCondition) {\n      setSelectedLanguages(langCondition.inValues)\n    }\n    const marketCondition = rule.conditions.find(condition => condition.attribute === 'market')\n    if (marketCondition) {\n      setSelectedMarkets(marketCondition.inValues)\n    }\n    const segCondition = rule.conditions.find(condition => condition.attribute === 'issuerSegmentation')\n    if (segCondition) {\n      setSelectedIssuerSegmentations(segCondition.inValues)\n    }\n    const countryCondition = rule.conditions.find(condition => condition.attribute === 'country')\n    if (countryCondition) {\n      setSelectedCountries(countryCondition.inValues)\n    }\n    setSelectedRegions(rule.regions);\n  }\n  const onRegionSelect = () => {\n    if (data) {\n      const markets = data.markets.filter(({ region }) => selectedRegions.indexOf(region) !== -1)\n      const issuerSegmentations = data.issuerSegmentations.filter(({ region }) => selectedRegions.indexOf(region) !== -1)\n      const countries = data.countries.filter(({ region }) => selectedRegions.indexOf(region) !== -1)\n      // clear selected data for dependent fields\n      setSelectedMarkets(selectedMarkets.filter(value => {\n        const target = data.markets.find(item => item._id === value)\n        return selectedRegions.indexOf(target.region) !== -1\n      }))\n      setSelectedIssuerSegmentations(selectedIssuerSegmentations.filter(\n        value => {\n          const target = data.issuerSegmentations.find(item => item._id === value)\n          return selectedRegions.indexOf(target.region) !== -1\n        }\n      ))\n      setSelectedCountries(selectedCountries.filter(\n        value => {\n          const target = data.countries.find(item => item._id === value)\n          return selectedRegions.indexOf(target.region) !== -1\n        }\n      ))\n      // following data will be used for showing filtered data in select options\n      setFilteredData({ markets, issuerSegmentations, countries })\n    }\n  }\n  const onCountrySelect = () => {\n    if (data) {\n      // clear selected data for dependent fields\n      setSelectedLanguages(selectedLanguages.filter(\n        value => {\n          const target = data.languages.find(item => item._id === value)\n          return selectedCountries.indexOf(target.country) !== -1\n        }\n      ))\n      // filter languages to show in options\n      const languages = data.languages.filter(({ country }) => selectedCountries.indexOf(country) !== -1)\n      setFilteredData({ ...filteredData, languages })\n    }\n  }\n  useEffect(() => {\n    init()\n  }, [])\n\n  useEffect(() => {\n    if (selectedRegions) {\n      onRegionSelect()\n    }\n  }, [selectedRegions])\n\n  useEffect(() => {\n    if (selectedCountries) {\n      onCountrySelect()\n    }\n  }, [selectedCountries])\n\n  const handleSubmit = async () => {\n    setSubmitting(true)\n    const body = {\n      title,\n      regions: selectedRegions,\n      conditionMatchType: matchType,\n      conditions: []\n    }\n    if (selectedMarkets && selectedMarkets.length > 0) {\n      body.conditions.push({\n        attribute: 'market',\n        inValues: selectedMarkets\n      })\n    }\n    if (selectedCountries && selectedCountries.length > 0) {\n      body.conditions.push({\n        attribute: 'country',\n        inValues: selectedCountries\n      })\n    }\n    if (selectedLanguages && selectedLanguages.length > 0) {\n      body.conditions.push({\n        attribute: 'lang',\n        inValues: selectedLanguages\n      })\n    }\n    if (selectedIssuerSegmentations && selectedIssuerSegmentations.length > 0) {\n      body.conditions.push({\n        attribute: 'issuerSegmentation',\n        inValues: selectedIssuerSegmentations\n      })\n    }\n    if (!body.conditions || body.conditions.length === 0) {\n      message.error('Rules without conditions have no significance!', 3);\n      setSubmitting(false)\n      return\n    }\n    try {\n      if (_id) {\n        await Axios.put(`${process.env.REACT_APP_API_URL}/rules/${_id}`, body);\n        message.success('Rule Updated Successfully', 3)\n        history.push('/rules')\n      } else {\n        await Axios.post(`${process.env.REACT_APP_API_URL}/rules`, body);\n        message.success('Rule Created Successfully', 3)\n        history.push('/rules')\n      }\n    } catch (e) {\n      message.error(e.message, 3)\n      setSubmitting(false)\n    }\n  }\n\n  return (\n    <>\n      <PageHeader\n        className=\"site-page-header\"\n        onBack={() => history.push('/rules')}\n        title=\"Back to Rules\"\n        subTitle=\"Manage rules associated with content\"\n      />\n\n      <Row>\n        <Col flex=\"1\"></Col>\n        <Col flex=\"1\">\n          <Card bordered>\n            <h2>{_id ? 'Update Rule' : 'Create Rule'}</h2>\n            <Spin size=\"large\" spinning={submitting}>\n              <CreateUpdateRuleForm {...{\n                loading, setLoading,\n                data, setData,\n                filteredData, setFilteredData,\n                selectedRegions, setSelectedRegions,\n                selectedMarkets, setSelectedMarkets,\n                selectedCountries, setSelectedCountries,\n                selectedLanguages, setSelectedLanguages,\n                selectedIssuerSegmentations, setSelectedIssuerSegmentations,\n                title, setTitle,\n                matchType, setMatchType\n              }} />\n              <Space style={{ float: 'left', marginTop: '25px' }}>\n                <Button onClick={() => { history.push('/rules') }} size=\"large\" >Cancel</Button>\n              </Space>\n              <Space style={{ float: 'right', marginTop: '25px' }}>\n                <Button disabled={!(selectedRegions && selectedRegions.length > 0) || !title || !matchType } onClick={handleSubmit} size=\"large\" type=\"primary\">{_id ? 'Update' : 'Create'}</Button>\n              </Space>\n            </Spin>\n          </Card>\n        </Col>\n        <Col flex=\"1\"></Col>\n      </Row>\n    </>\n  )\n}\n\nexport default CreateUpdateRule\n","import React, { useState, useEffect } from 'react'\nimport { Row, Col, Card, Button, Typography, message, Skeleton, Tag } from 'antd'\nimport { PlusOutlined } from '@ant-design/icons'\nimport Axios from 'axios';\nimport Avatar from 'antd/lib/avatar/avatar';\nimport { Link, useHistory } from 'react-router-dom';\nconst { Title} = Typography;\n\nconst Users = () => {\n  const history = useHistory();\n  const [users, setUsers] = useState();\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/users`);\n        setUsers(data)\n      } catch (e) {\n        message.error(e.message, 3)\n      }\n    })()\n  }, []);\n  return (\n    <>\n      <Row>\n        <Col flex=\"1\" style={{ padding: 25, background: '#ececec' }}>\n          <Title type=\"primary\" level={1} strong>Users</Title>\n          <br />\n          <Button size=\"large\" type=\"primary\" onClick={() => history.push('/users/create')}>\n            <PlusOutlined /> Create User\n          </Button>\n          <div style={{ marginTop: 20 }}>\n            {\n              users\n                ? users.map(\n                  item => <Row key={item._id}>\n                    <Col flex=\"1\">\n                      <div style={{}}>\n                        <Link to={`/users/update/${item._id}`}>\n                        <Card bordered style={{ width: '100%', marginTop: 20 }}\n                          hoverable>\n                          <Avatar shape=\"circle\" size={64} src={item.image} />\n                          <h2 style={{ display: 'inline-block' }}>\n                            {item.name}\n                          </h2>\n                          <h3>\n                            <Tag color=\"magenta\">REGION : <strong>{item.region.title}</strong></Tag>\n                            <Tag color=\"orange\">COUNTRY : <strong>{item.country.title}</strong> </Tag>\n                            <Tag color=\"green\">LANGUAGE : <strong>{item.lang.title}</strong> </Tag>\n                            <Tag color=\"blue\">MARKET : <strong>{item.market.title}</strong> </Tag>\n                            <Tag color=\"purple\">SEGMENT : <strong>{item.issuerSegmentation.title}</strong></Tag>\n                          </h3>\n                          </Card>\n                          </Link>\n                      </div>\n                    </Col>\n                  </Row>\n                )\n                : <>\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                </>\n            }\n          </div>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default Users\n","import React, { useEffect, useState } from 'react'\nimport { Select, Typography } from 'antd';\nimport Axios from 'axios';\nconst { Option } = Select;\nconst { Text } = Typography;\nconst RegionSelector = ({ region, setRegion }) => {\n  const [regions, setRegions] = useState([]);\n  useEffect(() => {\n    (async () => {\n      const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/regions`);\n      setRegions(data);\n    })()\n  }, [])\n  return (\n    <>\n      <Text type=\"primary\" strong>Region</Text>\n      <br />\n      <Select value={region} size='large' style={{ width: '100%' }} onChange={setRegion} loading={!regions.length}>\n        <Option value={null}>Select Region</Option>\n        {\n          regions && regions.map(\n            item => <Option key={item._id} value={item._id}>{item.title}</Option>\n          )\n        }\n      </Select>\n      <br/>\n    </>\n  )\n}\n\nexport default RegionSelector\n","/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React, { useEffect, useState } from 'react'\nimport { Select, Typography } from 'antd';\nimport Axios from 'axios';\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst CountrySelector = ({ region, country, setCountry }) => {\n  const [countries, setCountries] = useState([]);\n  useEffect(() => {\n    if (region) {\n      setCountries([]);\n      (async () => {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/countries?region=${region}`);\n        setCountries(data);\n        const match = data.find(item => item._id === country)\n        if (!match) {\n          setCountry(null);\n        }\n      })()\n    } else {\n      setCountries([]);\n    }\n  }, [region, setCountry])\n  return (\n    <>\n      <Text type=\"primary\" strong>Country</Text>\n      <br />\n      <Select value={country} size='large' style={{ width: '100%' }} onChange={setCountry} loading={!countries.length}>\n        <Option value={null}>Select Country</Option>\n        {\n          countries && countries.map(\n            item => <Option key={item._id} value={item._id}>{item.title}</Option>\n          )\n        }\n      </Select>\n      <br/>\n    </>\n  )\n}\n\nexport default CountrySelector\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react'\nimport { Select, Typography } from 'antd';\nimport Axios from 'axios';\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst MarketSelector = ({ region, market, setMarket }) => {\n  const [markets, setMarkets] = useState([]);\n  useEffect(() => {\n    if (region) {\n      setMarkets([]);\n      (async () => {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/markets?region=${region}`);\n        setMarkets(data);\n        const match = data.find(item => item._id === market)\n        if (!match) {\n          setMarket(null);\n        }\n      })()\n    } else {\n      setMarkets([]);\n    }\n  }, [region, setMarket])\n  return (\n    <>\n      <Text type=\"primary\" strong>Market</Text>\n      <br />\n      <Select value={market} size='large' style={{ width: '100%' }} onChange={setMarket} loading={!markets.length}>\n        <Option value={null}>Select Market</Option>\n        {\n          markets && markets.map(\n            item => <Option key={item._id} value={item._id}>{item.title}</Option>\n          )\n        }\n      </Select>\n      <br/>\n    </>\n  )\n}\n\nexport default MarketSelector\n","/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React, { useEffect, useState } from 'react'\nimport { Select, Typography } from 'antd';\nimport Axios from 'axios';\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst IssuerSegmentationSelector = ({ region, issuerSegmentation, setIssuerSegmentation }) => {\n  const [issuerSegmentations, setIssuerSegmentations] = useState([]);\n  useEffect(() => {\n    if (region) {\n      setIssuerSegmentations([]);\n      (async () => {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/issuer-segmentations?region=${region}`);\n        setIssuerSegmentations(data);\n        const match = data.find(item => item._id === issuerSegmentation)\n        if (!match) {\n          setIssuerSegmentation(null);\n        }\n      })()\n    } else {\n      setIssuerSegmentations([]);\n    }\n  }, [region, setIssuerSegmentation])\n  return (\n    <>\n      <Text type=\"primary\" strong>Issuer Segmentation</Text>\n      <br />\n      <Select value={issuerSegmentation} size='large' style={{ width: '100%' }} onChange={setIssuerSegmentation} loading={!issuerSegmentations.length}>\n        <Option value={null}>Select IssuerSegmentation</Option>\n        {\n          issuerSegmentations && issuerSegmentations.map(\n            item => <Option key={item._id} value={item._id}>{item.title}</Option>\n          )\n        }\n      </Select>\n      <br/>\n    </>\n  )\n}\n\nexport default IssuerSegmentationSelector\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react'\nimport { Select, Typography } from 'antd';\nimport Axios from 'axios';\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst LangSelector = ({ country, lang, setLang }) => {\n  const [langs, setLangs] = useState([]);\n  useEffect(() => {\n    if (country) {\n      setLangs([]);\n      (async () => {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/languages?country=${country}`);\n        setLangs(data);\n        const match = data.find(item => item._id === lang)\n        if (!match) {\n          setLang(null);\n        }\n      })()\n    } else {\n      setLangs([]);\n    }\n  }, [country, setLang])\n  return (\n    <>\n      <Text type=\"primary\" strong>Language</Text>\n      <br />\n      <Select value={lang} size='large' style={{ width: '100%' }} onChange={setLang} loading={!langs.length}>\n        <Option value={null}>Select Lang</Option>\n        {\n          langs && langs.map(\n            item => <Option key={item._id} value={item._id}>{item.title}</Option>\n          )\n        }\n      </Select>\n      <br />\n      <br/>\n    </>\n  )\n}\n\nexport default LangSelector\n","import React from 'react'\n\nimport RegionSelector from './RegionSelector';\nimport CountrySelector from './CountrySelector';\nimport MarketSelector from './MarketSelector';\nimport IssuerSegmentationSelector from './IssuerSegmentationSelector';\nimport LangSelector from './LangSelector';\nimport { Input, Typography } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\n\nconst { Text } = Typography;\n\nconst CreateUpdateUserForm = (props) => {\n  const {\n    name, setName,\n    region, setRegion,\n    country, setCountry,\n    market, setMarket,\n    issuerSegmentation, setIssuerSegmentation,\n    lang, setLang\n  } = props\n  return (\n    <>\n      <Text type=\"primary\" strong>Name</Text>\n      <br />\n      <Input style={{ width: '100%' }} value={name} onChange={e => setName(e.target.value)} size=\"large\" placeholder=\"Enter Name\" prefix={<UserOutlined />} />\n      <br />\n      <RegionSelector {...{ region, setRegion }} />\n      <MarketSelector {...{ region, market, setMarket }} />\n      <IssuerSegmentationSelector {...{ region, issuerSegmentation, setIssuerSegmentation }} />\n      <CountrySelector {...{ region, country, setCountry }} />\n      <LangSelector {...{ country, lang, setLang }} />\n    </>\n  )\n}\n\nexport default CreateUpdateUserForm\n","import React, { useEffect, useState } from 'react'\nimport { useParams, useHistory } from 'react-router'\nimport Axios from 'axios'\nimport { message, Row, Col, Card, Skeleton, Button, Space, Spin, PageHeader } from 'antd'\nimport CreateUpdateUserForm from '../components/CreateUpdateUserForm'\n\nconst CreateUpdateUser = () => {\n  const history = useHistory();\n  const { _id } = useParams()\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [name, setName] = useState(null);\n  const [region, setRegion] = useState(null);\n  const [country, setCountry] = useState(null);\n  const [lang, setLang] = useState(null);\n  const [market, setMarket] = useState(null);\n  const [issuerSegmentation, setIssuerSegmentation] = useState(null);\n\n  useEffect(() => {\n    if (_id) {\n      (async () => {\n        setLoading(true);\n        try {\n          const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/users/${_id}`);\n          init(data)\n        } catch (e) {\n          message.error(e.message, 3)\n          setLoading(false)\n        }\n      })()\n    }\n  }, [_id])\n  const init = (user) => {\n    setName(user.name)\n    setRegion(user.region._id)\n    setMarket(user.market._id)\n    setIssuerSegmentation(user.issuerSegmentation._id)\n    setCountry(user.country._id)\n    setLang(user.lang._id)\n    setLoading(false)\n  }\n  const handleSubmit = async () => {\n    setSubmitting(true);\n    try {\n      if (_id) {\n        await Axios.put(`${process.env.REACT_APP_API_URL}/users/${_id}`, { name, region, country, lang: lang, market, issuerSegmentation });\n        message.success('User Updated Successfully', 3)\n      } else {\n        await Axios.post(`${process.env.REACT_APP_API_URL}/users`, { name, region, country, lang: lang, market, issuerSegmentation });\n        message.success('User Created Successfully', 3)\n      }\n      history.push('/users')\n    } catch (e) {\n      message.error(e.message, 3)\n      setSubmitting(false)\n    }\n  }\n  return (\n    <>\n      <PageHeader\n        className=\"site-page-header\"\n        onBack={() => history.push('/users')}\n        title=\"Users\"\n      />\n      <Row>\n        <Col span={8} />\n        <Col span={8}>\n          <Card bordered>\n            <h2>{_id ? 'Update User' : 'Create User'}</h2>\n            {!loading\n              ? <>\n                <Spin size=\"large\" spinning={submitting}>\n                  <CreateUpdateUserForm {\n                    ...{\n                      name, setName,\n                      region, setRegion,\n                      country, setCountry,\n                      market, setMarket,\n                      issuerSegmentation, setIssuerSegmentation,\n                      lang, setLang\n                    }\n                  } />\n                  <Space style={{ float: 'left' }}>\n                    <Button onClick={() => { history.push('/users') }} size=\"large\" >Cancel</Button>\n                  </Space>\n                  <Space style={{ float: 'right' }}>\n                    <Button disabled={!name || !region || !country || !market || !issuerSegmentation || !lang} onClick={handleSubmit} size=\"large\" type=\"primary\">{_id ? 'Update' : 'Create'}</Button>\n                  </Space>\n                </Spin>\n              </>\n              : <Skeleton active paragraph={{ rows: 10 }} />\n            }\n          </Card>\n        </Col>\n        <Col span={8} />\n      </Row>\n    </>\n  )\n}\n\nexport default CreateUpdateUser\n","import React, { useState, useEffect } from 'react'\nimport { Row, Col, Card, Button, Typography, message, Skeleton, Tag, Input, Spin } from 'antd'\nimport { PlusOutlined, SettingOutlined, EditOutlined } from '@ant-design/icons'\nimport Axios from 'axios';\nimport Avatar from 'antd/lib/avatar/avatar';\nimport { useHistory } from 'react-router-dom';\nimport Modal from 'antd/lib/modal/Modal';\nconst { Title } = Typography;\nconst Contents = () => {\n  const history = useHistory();\n  const [showCreateModal, setShowCreateModal] = useState(false)\n  const [showUpdateModal, setShowUpdateModal] = useState(false)\n  const [contents, setContents] = useState();\n  const [contentTitle, setContentTitle] = useState();\n  const [currentContent, setCurrentContent] = useState();\n  const [submitting, setSubmitting] = useState(false);\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/contents`);\n        setContents(data)\n      } catch (e) {\n        message.error(e.message, 3)\n      }\n    })()\n  }, []);\n  const handleCreate = async () => {\n    if (contentTitle) {\n      setSubmitting(true)\n      try {\n        const { data } = await Axios.post(`${process.env.REACT_APP_API_URL}/contents`, { title: contentTitle });\n        setContents([data, ...contents])\n        setShowCreateModal(false)\n        setSubmitting(false)\n        setContentTitle(null)\n      } catch (e) {\n        message.error(e.message, 3)\n        setSubmitting(false)\n      }\n    }\n  }\n  const handleUpdate = async () => {\n    if (currentContent && currentContent.title) {\n\n      setSubmitting(true)\n      try {\n        const { data } = await Axios.put(`${process.env.REACT_APP_API_URL}/contents/${currentContent._id}`, { title: currentContent.title });\n        const updated = contents.map(content => {\n          if (content._id === data._id) {\n            return data;\n          }\n          return content\n        })\n        setContents(updated)\n        setShowUpdateModal(false)\n        setSubmitting(false)\n        setCurrentContent(null)\n      } catch (e) {\n        message.error(e.message, 3)\n        setSubmitting(false)\n      }\n    }\n  }\n  return (\n    <>\n      <Row>\n        <Col flex=\"1\" style={{ padding: 25, background: '#ececec' }}>\n          <Title type=\"primary\" level={1} strong>Contents</Title>\n          <br />\n          <Button size=\"large\" type=\"primary\" onClick={() => setShowCreateModal(true)}>\n            <PlusOutlined /> Create Content\n          </Button>\n          <Row style={{ marginTop: 20 }}>\n            {\n              contents\n                ? contents.map(\n                  item => <Col span={8} key={item._id}>\n                    <Card\n                      style={{ width: 500, marginTop: 16 }}\n                      actions={[\n                        <><SettingOutlined key=\"rules\" onClick={() => history.push(`/contents/${item._id}`)} /> Rules</>,\n                        <><EditOutlined key=\"edit\" onClick={() => { setCurrentContent(item); setShowUpdateModal(true) }} />Edit</>\n                      ]}\n                    >\n                      <Avatar shape=\"circle\" size={100} src={item.image} />\n                      <h2 style={{ display: 'inline-block' }}>\n                        {item.title}\n                        <br />\n                        {\n                          item.rules && item.rules.length > 0\n                            ? <Tag color=\"green\"><strong>Rules Applied</strong></Tag>\n                            : <Tag color=\"red\"><strong>No Rules</strong></Tag>\n                        }\n                      </h2>\n                    </Card>\n                  </Col>\n                )\n                : <>\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                  <Skeleton active avatar paragraph={{ rows: 2 }} />\n                </>\n            }\n          </Row>\n        </Col>\n      </Row>\n      <Modal\n        title=\"Create Content\"\n        visible={showCreateModal}\n        okText='Create'\n        onOk={handleCreate}\n        onCancel={() => setShowCreateModal(false)}\n      >\n        <Spin size=\"large\" spinning={submitting}>\n          <Input placeholder=\"Content Title\"\n            value={contentTitle}\n            onChange={e => setContentTitle(e.target.value)}\n          />\n        </Spin>\n      </Modal>\n      <Modal\n        title=\"Update Content\"\n        visible={showUpdateModal}\n        onOk={handleUpdate}\n        okText='Update'\n        onCancel={() => setShowUpdateModal(false)}\n      >\n        <Spin size=\"large\" spinning={submitting}>\n          {\n            currentContent\n              ? <Input placeholder=\"Content Title\"\n                value={currentContent.title}\n                onChange={e => { setCurrentContent({ ...currentContent, title: e.target.value }) }}\n              />\n              : ''\n          }\n        </Spin>\n      </Modal>\n    </>\n  )\n}\n\nexport default Contents\n","import React, { useState, useEffect} from 'react'\nimport { List, Row, Switch, Col, Card, message, Skeleton, Spin, Typography, Divider, Result, Button, Space, PageHeader, Radio } from 'antd'\nimport RuleList from '../components/RuleList'\nimport { useParams, useHistory } from 'react-router';\nimport Axios from 'axios';\nimport Avatar from 'antd/lib/avatar/avatar';\nimport { DeleteOutlined, FundViewOutlined } from '@ant-design/icons'\nimport RegionSelector from '../components/RegionSelector';\nconst { Title, Text } = Typography\nconst ConfigureContentRules = () => {\n  const history = useHistory();\n  const { _id } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [content, setContent] = useState();\n  const [updatingRules, setUpdatingRules] = useState(false);\n  const [search, setSearch] = useState();\n  const [region, setRegion] = useState('5f22f961ab69d5439029b3e8');\n  const [lazy, setLazy] = useState(true)\n  const onRuleSelect = async (newRuleId) => {\n    // get current rule list , add this rule to that & update the content with it\n    const ruleIds = content.rules.map(({ _id }) => _id)\n    if (ruleIds.indexOf(newRuleId) === -1) {\n      setUpdatingRules(true)\n      ruleIds.push(newRuleId)\n      try {\n        const { data } = await Axios.put(`${process.env.REACT_APP_API_URL}/contents/${_id}`, { rules: ruleIds });\n        setContent(data);\n        setUpdatingRules(false)\n      } catch (e) {\n        message.error(e.message)\n        setUpdatingRules(false)\n      }\n    } else {\n      message.warn('The rule you are trying to apply, is already applied to this content', 5)\n    }\n  }\n  const onRuleRemove = async (ruleToRemove) => {\n    setUpdatingRules(true)\n    let ruleIds = content.rules.map(({ _id }) => _id)\n    ruleIds = ruleIds.filter(_id => _id !== ruleToRemove)\n    try {\n      const { data } = await Axios.put(`${process.env.REACT_APP_API_URL}/contents/${_id}`, { rules: ruleIds });\n      setContent(data);\n      setUpdatingRules(false)\n    } catch (e) {\n      message.error(e.message)\n      setUpdatingRules(false)\n    }\n  }\n  const updateRuleMatchType = async (ruleMatchType) => {\n    setUpdatingRules(true)\n    try {\n      const { data } = await Axios.put(`${process.env.REACT_APP_API_URL}/contents/${_id}`, { ruleMatchType });\n      setContent(data);\n      setUpdatingRules(false)\n      message.success(`Updated: ${ruleMatchType} rule(s) will be matched during content targetting for users!`)\n    } catch (e) {\n      message.error(e.message)\n      setUpdatingRules(false)\n    }\n  }\n  useEffect(() => {\n    if (_id) {\n      setLoading(true)\n      try {\n        (async () => {\n          const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/contents/${_id}`);\n          setContent(data)\n          setLoading(false)\n        })()\n      } catch (e) {\n        message.error(e.message)\n        setLoading(false)\n      }\n    }\n  }, [_id])\n  return (\n    <>\n      <PageHeader\n        className=\"site-page-header\"\n        onBack={() => history.push('/contents')}\n        title=\"Back\"\n        subTitle=\"Manage rules associated with content\"\n        extra={\n          (\n            <div style={{width: 200}}>\n              Currently Managing:  <RegionSelector {...{ region, setRegion }} />\n            </div>\n          )\n        }\n      >\n      </PageHeader>\n\n      <Row>\n        <Col span={12}>\n          <Card title=\"Content Details\" bordered style={{ width: '100%', minHeight: '80vh' }}>\n            <Spin size=\"large\" spinning={loading}>\n              {\n                content ?\n                  <>\n                    <Row>\n                      <Col span=\"6\">\n                        <Avatar shape=\"circle\" size={50} src={content.image} />\n                      </Col>\n                      <Col span=\"18\">\n                        <Title level={4} style={{ marginTop: 20 }}>{content.title}</Title>\n                      </Col>\n                    </Row>\n                    <Divider orientation=\"left\">Rules</Divider>\n                    {\n                      updatingRules\n                        ? <Skeleton active paragraph={{ rows: 20 }}></Skeleton>\n                        : content.rules && content.rules.length > 0\n                          ? <>\n                            <Text type=\"primary\" strong>Match Type</Text>\n                            <br />\n                            <Radio.Group\n                              options={[{ label: 'Match All', value: 'ALL' }, { label: 'Match Any', value: 'ANY' }]}\n                              onChange={e => updateRuleMatchType(e.target.value)}\n                              value={content.ruleMatchType}\n                              optionType=\"button\"\n                              buttonStyle=\"solid\"\n                            />\n                            <br />\n                            <List\n                              size=\"large\"\n                              bordered\n                              dataSource={content.rules}\n                              renderItem={\n                                item => <List.Item>\n                                  <Text>{item.title}</Text>\n                                  <Space>\n                                    <Button onClick={() => onRuleRemove(item._id)} title=\"Remove Rule\" type=\"danger\" shape=\"circle\" icon={<DeleteOutlined />} />\n                                    <Button onClick={() => setSearch(item.title)} type=\"primary\" icon={<FundViewOutlined />}>View Dteails</Button>\n                                  </Space>\n                                </List.Item>\n                              }\n                            />\n                          </>\n                          : <Result\n                            status=\"404\"\n                            title=\"No Rules Applied\"\n                            subTitle=\"Search rules from sidebar & click to apply\"\n                            extra={<Title level={4}>This content is visible to all by default!</Title>}\n                          />\n                    }\n                  </>\n                  : ''\n              }\n            </Spin>\n          </Card>\n        </Col>\n        <Col span={12}>\n          <Card title=\"Search & Apply Rules\" bordered style={{ width: '100%', minHeight: '80vh' }}>\n            <Switch checkedChildren=\"Search Only\" unCheckedChildren=\"Show All\" onChange={() => setLazy(!lazy) && setSearch(null)} />\n            <div style={{ height: '90vh', overflowY: 'auto' }}>\n              <RuleList search={search} region={region} lazy={lazy} clickAction={onRuleSelect}></RuleList>\n            </div>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default ConfigureContentRules\n","import React, { useState } from 'react'\nexport const UserContext = React.createContext();\n\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  return (\n    <UserContext.Provider value={{ user, setUser }}>{children}</UserContext.Provider>\n  )\n}\n\nexport default UserProvider\n","import React, { useContext, useState, useEffect } from 'react'\nimport { UserContext } from '../context/UserContext'\nimport { Select, message, Result, Card, Tag, Spin, Row, Col } from 'antd'\nimport Axios from 'axios';\nimport Avatar from 'antd/lib/avatar/avatar';\nimport { Link } from 'react-router-dom';\nconst { Option } = Select;\n\nconst SimulateUserSession = () => {\n  const { user, setUser } = useContext(UserContext)\n  const [userList, setUserList] = useState()\n  const [loading, setLoading] = useState(false)\n  const [contents, setContents] = useState()\n  const onUserSelect = (value) => {\n    const selected = userList.find(({ _id }) => _id === value)\n    setUser(selected)\n  }\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/users`);\n        setUserList(data)\n      } catch (e) {\n        message.error(e.message, 3)\n      }\n    })()\n\n  }, [])\n  useEffect(() => {\n    if (user) {\n      setLoading(true);\n      (async () => {\n        try {\n          const { data } = await Axios.get(`${process.env.REACT_APP_API_URL}/targetted-contents/${user._id}`);\n          setContents(data)\n          setLoading(false)\n        } catch (e) {\n          message.error(e.message, 3)\n          setLoading(false)\n        }\n      })()\n    }\n\n  }, [user])\n  return (\n    <>\n      <div style={{ textAlign: 'center' }}>\n        <Select\n          loading={!userList}\n          value={user && user._id}\n          size='large'\n          showSearch\n          style={{ width: 200 }}\n          placeholder=\"Select a User\"\n          optionFilterProp=\"children\"\n          filterOption={(input, option) =>\n            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n          }\n          onChange={onUserSelect}\n        >\n          {\n            userList && userList.map(user => <Option key={user._id} value={user._id}>{user.name}</Option>)\n          }\n        </Select>\n      </div>\n      <div>\n\n        {\n          user\n            ? <>\n              <Card bordered style={{ width: '100%', marginTop: 20 }}>\n                <Avatar shape=\"circle\" size={40} src={user.image} />\n                <h4 style={{ display: 'inline-block' }}>\n                  {user.name} &nbsp;\n                  <Tag color=\"magenta\">REGION : <strong>{user.region.title}</strong></Tag>\n                  <Tag color=\"orange\">COUNTRY : <strong>{user.country.title}</strong> </Tag>\n                  <Tag color=\"green\">LANGUAGE : <strong>{user.lang.title}</strong> </Tag>\n                  <Tag color=\"blue\">MARKET : <strong>{user.market.title}</strong> </Tag>\n                  <Tag color=\"purple\">SEGMENT : <strong>{user.issuerSegmentation.title}</strong></Tag>\n                </h4>\n              </Card>\n              <Spin size=\"large\" spinning={loading}>\n                <Row gutter={3}>\n                  {\n                    contents ? contents.map((content) => {\n                      return <Col span=\"6\" key={content._id}>\n                        <Card bordered style={{ height: '100%', width: '100%', marginTop: 20 }}>\n                          <Avatar shape=\"circle\" size={64} src={content.image} />\n                          <h3 style={{ display: 'inline-block' }}>\n                            {content.title}\n                          </h3>\n                          <h3>\n                            {\n                              content.rules.map(rule => <Tag key={rule._id} color=\"green\"><Link to={`/rules/update/${rule._id}`}><strong>RULE: {rule.title}</strong></Link></Tag>)\n                            }\n                          </h3>\n                        </Card>\n                      </Col>\n                    }) : ''\n                  }\n                </Row>\n              </Spin>\n            </>\n            : <Result\n              title=\"Please sign in as a User from above selector\"\n            />\n        }\n      </div>\n\n    </>\n  )\n}\n\nexport default SimulateUserSession\n","import React, { useEffect, useState } from 'react';\nimport { Layout, Menu, notification, Result } from 'antd';\nimport { GithubOutlined, ScheduleOutlined, UsergroupAddOutlined, LoginOutlined, PicLeftOutlined } from '@ant-design/icons';\nimport { NavLink, useLocation, Route, Switch, Redirect, Link } from 'react-router-dom';\nimport Rules from './pages/Rules';\nimport CreateUpdateRule from './pages/CreateUpdateRule';\nimport Users from './pages/Users';\nimport CreateUpdateUser from './pages/CreateUpdateUser';\nimport Contents from './pages/Contents';\nimport ConfigureContentRules from './pages/ConfigureContentRules';\nimport SimulateUserSession from './pages/SimulateUserSession';\n\nconst { Header, Content, Footer } = Layout;\n\nfunction App() {\n  const [accepted, setAccepted] = useState(localStorage.getItem('termsAccepted'))\n  useEffect(() => {\n    if (!accepted) {\n      notification.warning({\n        message: <h2 style={{ color: '#FAB120' }}>Important Instructions</h2>,\n        duration: null,\n        description: (\n          <ul>\n            <li>All the data used is <strong>fictitious</strong></li>\n            <li>User & content image thumbnails are generated randomly & should not be associated with any kind of <strong>race/color/gender discrimination</strong></li>\n            <li>Available features are just for <strong>demo purpose</strong> & may differ from actual requirements</li>\n            <li>By <strong>clicking or closing</strong> this notification, you agree with above conditions!</li>\n          </ul>\n        ),\n        style: {\n          width: '100%'\n        },\n        onClick: () => {\n          setAccepted(true)\n          localStorage.setItem('termsAccepted', true)\n        },\n        onClose: () => {\n          setAccepted(true)\n          localStorage.setItem('termsAccepted', true)\n        }\n      });\n    }\n  }, [accepted])\n  const location = useLocation();\n  return (\n    <Layout className=\"layout\">\n      <Header>\n        <Link to=\"/\">\n          <div className=\"logo\" >RULE ENGINE DEMO</div>\n        </Link>\n        <Menu theme=\"dark\" mode=\"horizontal\" selectedKeys={[location.pathname,]}>\n          <Menu.Item key=\"/users\">\n            <NavLink to=\"/users\">\n              <UsergroupAddOutlined />\n              <strong>Users</strong>\n            </NavLink>\n          </Menu.Item>\n          <Menu.Item key=\"/rules\">\n            <NavLink to=\"/rules\">\n              <ScheduleOutlined />\n              <strong>Rules</strong>\n            </NavLink>\n          </Menu.Item>\n          <Menu.Item key=\"/contents\">\n            <NavLink to=\"/contents\">\n              <PicLeftOutlined />\n              <strong>Contents</strong>\n            </NavLink>\n          </Menu.Item>\n          <Menu.Item key=\"/simulate\">\n            <NavLink to=\"/simulate\">\n              <LoginOutlined />\n              <strong>Simulate User Session</strong>\n            </NavLink>\n          </Menu.Item>\n          <Menu.Item style={{ float: \"right\" }}>\n            <a target=\"blank\" href=\"https://github.com/rahulbhooteshwar/rule-engine-demo-client\">\n            <GithubOutlined /> <strong style={{color: 'orange'}}>UI</strong>\n            </a>\n          </Menu.Item>\n          <Menu.Item style={{ float: \"right\" }}>\n            <a target=\"blank\" href=\"https://github.com/rahulbhooteshwar/rule-engine-demo-server\">\n            <GithubOutlined /> <strong style={{color: 'orange'}}>API</strong>\n            </a>\n          </Menu.Item>\n          <Menu.Item style={{ float: \"right\" }}>\n            <a target=\"blank\" href=\"https://rahulbhooteshwar.github.io\">\n              Brought to you by: <strong style={{color: 'orange'}}>Rahul Bhooteshwar</strong>\n            </a>\n          </Menu.Item>\n        </Menu>\n      </Header>\n      <Content>\n        <div style={{ backgroundColor: 'white', minHeight: '100vh' }}>\n          {\n            accepted ?\n              <Switch>\n                <Route path=\"/simulate\">\n                  <SimulateUserSession />\n                </Route>\n                <Route path=\"/contents/:_id\">\n                  <ConfigureContentRules />\n                </Route>\n                <Route path=\"/contents\">\n                  <Contents />\n                </Route>\n                <Route path=\"/rules/create\">\n                  <CreateUpdateRule />\n                </Route>\n                <Route path=\"/rules/update/:_id\">\n                  <CreateUpdateRule />\n                </Route>\n                <Route path=\"/rules\">\n                  <Rules />\n                </Route>\n                <Route path=\"/users/create\">\n                  <CreateUpdateUser />\n                </Route>\n                <Route path=\"/users/update/:_id\">\n                  <CreateUpdateUser />\n                </Route>\n                <Route path=\"/users\">\n                  <Users />\n                </Route>\n                <Route path=\"/\">\n                  <Redirect to=\"/users\" />\n                </Route>\n              </Switch>\n\n              : <Result\n                style={{ paddingTop: 200 }}\n                status=\"500\"\n                title=\"Let's be clear at first place\"\n                subTitle=\"Read & Close the notification to continue.\"\n              />\n          }\n        </div>\n      </Content>\n      <Footer style={{ textAlign: 'center' }}>Rule Engine Demo 2020 Created by <a target=\"blank\" href=\"https://rahulbhooteshwar.github.io\">Rahul Bhooteshwar</a></Footer>\n    </Layout>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport \"antd/dist/antd.css\";\nimport './index.css';\nimport UserProvider from './context/UserContext';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </BrowserRouter>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}