(this["webpackJsonprule-engine-demo-client"]=this["webpackJsonprule-engine-demo-client"]||[]).push([[0],{199:function(e,t,a){e.exports=a(336)},335:function(e,t,a){},336:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),s=a(342),i=a(145),u=a(350),o=a(77),m=a(359),p=a(360),g=a(361),d=a(362),E=a(27),f=a(53),b=a(346),h=a(90),v=a(58),y=a(353),O=a(11),k=a.n(O),j=a(31),S=a(12),x=a(26),w=a.n(x),C=a(198),T=a(349),_=a(347),z=a(343),R=a(351),M=a(352),F=function(e){var t=e.region,a=e.lazy,l=void 0!==a&&a,c=e.search,s=e.clickAction,i=void 0===s?null:s,u=Object(n.useState)(),o=Object(S.a)(u,2),m=o[0],p=o[1],g=Object(n.useState)(),d=Object(S.a)(g,2),f=d[0],b=d[1],y=Object(n.useState)(!1),O=Object(S.a)(y,2),x=O[0],F=O[1],L=Object(E.g)();Object(n.useEffect)((function(){c&&b(c)}),[c]);var I={country:"orange",lang:"green",market:"blue",issuerSegmentation:"purple"};Object(n.useEffect)((function(){(!l||l&&f&&f.length>2)&&Object(j.a)(k.a.mark((function e(){var a,n,r,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://rule-engine-demo-server.cfapps.io/","/rules"),n={},t&&(n.regions=t),f&&(n.keyword=f),e.prev=4,F(!0),e.next=8,w.a.get(a,{params:n});case 8:r=e.sent,l=r.data,p(l),F(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),F(!1),C.b.error(e.t0.message,3);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))()}),[t,l,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1",style:{padding:25,background:"#ececec"}},l?r.a.createElement(T.a,{size:"large",allowClear:!0,placeholder:"Type something...",value:f,onChange:function(e){return b(e.target.value)}}):"",x?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{active:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,paragraph:{rows:2}})):"",r.a.createElement("div",{style:{marginTop:20}},m&&!x?m.map((function(e){return r.a.createElement(z.a,{onClick:function(){return t=e._id,void(i?i(t):L.push("/rules/update/"+t));var t},key:e._id,bordered:!0,style:{width:"100%",marginTop:20},hoverable:!0},r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1"},r.a.createElement("h2",{style:{display:"inline-block"}},e.title)),r.a.createElement(v.a,{flex:"4"},r.a.createElement(R.a,{style:{fontSize:20},color:"gold"},"Match Type : ",r.a.createElement("strong",null,e.conditionMatchType)),r.a.createElement(R.a,{style:{fontSize:20},color:"magenta"},"REGIONS : ",r.a.createElement("strong",null,e.regions.map((function(e){return" "+e.title})))),e.conditions.map((function(e){return r.a.createElement(R.a,{style:{fontSize:20},key:e.attribute,color:I[e.attribute]},e.attribute,"  ",r.a.createElement(M.a,null),r.a.createElement("strong",null,e.inValues.map((function(e,t){return"".concat(t>0?" | ":"  ")+e.title}))))})))))})):""))))},L=b.a.Title,I=function(){var e=Object(E.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1",style:{padding:25,background:"#ececec"}},r.a.createElement(L,{type:"primary",level:1,strong:!0},"Rules"),r.a.createElement("br",null),r.a.createElement(o.a,{size:"large",type:"primary",onClick:function(){return e.push("/rules/create")}},r.a.createElement(y.a,null)," Create Rule"),r.a.createElement(F,null))))},U=a(89),A=a(344),N=a(187),P=a(340),V=a(105),D=a(348),G=b.a.Text,B=V.a.Option,H=function(e){var t=e.loading,a=e.data,n=e.filteredData,l=e.title,c=e.setTitle,s=e.matchType,i=e.setMatchType,u=e.selectedRegions,o=e.setSelectedRegiions,m=e.selectedMarkets,p=e.setSelectedMarkets,g=e.selectedCountries,d=e.setSelectedCountries,E=e.selectedLanguages,f=e.setSelectedLanguages,b=e.selectedIssuerSegmentations,h=e.setSelectedIssuerSegmentations;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(_.a,{active:!0,paragraph:{rows:12}}):"",a?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{type:"primary",strong:!0},"Title"),r.a.createElement(T.a,{style:{width:"100%"},value:l,onChange:function(e){return c(e.target.value)},size:"large",placeholder:"Enter Title"}),r.a.createElement("br",null),r.a.createElement(G,{type:"primary",strong:!0},"Available in Regions"),r.a.createElement(V.a,{value:u,onChange:function(e){return o(e)},mode:"multiple",size:"large",filterOption:!0,optionFilterProp:"label",placeholder:"Select Regions",style:{width:"100%"},optionLabelProp:"label"},a.regions.map((function(e){return r.a.createElement(B,{key:e._id,value:e._id,label:e.title},e.title)}))),r.a.createElement("h3",{style:{marginTop:"10px"}},"Configure Conditions"),r.a.createElement(G,{type:"primary",strong:!0},"Match Type"),r.a.createElement("br",null),r.a.createElement(D.a.Group,{options:[{label:"Match All",value:"ALL"},{label:"Match Any",value:"ANY"}],onChange:function(e){return i(e.target.value)},value:s,optionType:"button",buttonStyle:"solid"}),r.a.createElement("br",null),r.a.createElement(G,{type:"primary",strong:!0},"Markets"),r.a.createElement(V.a,{value:m,onChange:function(e){return p(e)},mode:"multiple",filterOption:!0,optionFilterProp:"label",size:"large",placeholder:"Select Markets",style:{width:"100%"},optionLabelProp:"label"},n&&n.markets&&n.markets.map((function(e){return r.a.createElement(B,{key:e._id,value:e._id,label:e.title},e.title)}))),r.a.createElement(G,{type:"primary",strong:!0},"Issuer Segmentations"),r.a.createElement(V.a,{value:b,onChange:function(e){return h(e)},mode:"multiple",size:"large",placeholder:"Select Segmentations",style:{width:"100%"},filterOption:!0,optionFilterProp:"label",optionLabelProp:"label"},n&&n.issuerSegmentations&&n.issuerSegmentations.map((function(e){return r.a.createElement(B,{key:e._id,value:e._id,label:e.title},e.title)}))),r.a.createElement(G,{type:"primary",strong:!0},"Countries"),r.a.createElement(V.a,{mode:"multiple",size:"large",placeholder:"Select Countries",style:{width:"100%"},value:g,onChange:function(e){return d(e)},filterOption:!0,optionFilterProp:"label",optionLabelProp:"label"},n&&n.countries&&n.countries.map((function(e){return r.a.createElement(B,{key:e._id,value:e._id,label:e.title},e.title)}))),r.a.createElement(G,{type:"primary",strong:!0},"Languages"),r.a.createElement(V.a,{value:E,onChange:function(e){return f(e)},mode:"multiple",size:"large",placeholder:"Select Languages",style:{width:"100%"},optionLabelProp:"label",filterOption:!0,optionFilterProp:"label"},n&&n.languages&&n.languages.map((function(e){return r.a.createElement(B,{key:e._id,value:e._id,label:e.title},e.title)})))):"")},Y=function(){var e=Object(E.g)(),t=Object(E.i)()._id,a=Object(n.useState)(!1),l=Object(S.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!1),u=Object(S.a)(i,2),m=u[0],p=u[1],g=Object(n.useState)(),d=Object(S.a)(g,2),f=d[0],b=d[1],y=Object(n.useState)({}),O=Object(S.a)(y,2),x=O[0],T=O[1],_=Object(n.useState)([]),R=Object(S.a)(_,2),M=R[0],F=R[1],L=Object(n.useState)([]),I=Object(S.a)(L,2),V=I[0],D=I[1],G=Object(n.useState)([]),B=Object(S.a)(G,2),Y=B[0],J=B[1],K=Object(n.useState)([]),W=Object(S.a)(K,2),q=W[0],Q=W[1],X=Object(n.useState)([]),Z=Object(S.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(),ae=Object(S.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)("ALL"),ce=Object(S.a)(le,2),se=ce[0],ie=ce[1],ue=function(){var e=Object(j.a)(k.a.mark((function e(){var a,n,r,l,c,i,u,o,m,p;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/regions"));case 4:return a=e.sent,n=a.data,e.next=8,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/markets"));case 8:return r=e.sent,l=r.data,e.next=12,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/issuer-segmentations"));case 12:return c=e.sent,i=c.data,e.next=16,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/countries"));case 16:return u=e.sent,o=u.data,e.next=20,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/languages"));case 20:m=e.sent,p=m.data,b({regions:n,markets:l,issuerSegmentations:i,countries:o,languages:p}),t&&oe(),s(!1),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(1),s(!1),C.b.error(e.t0.message,3);case 31:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(k.a.mark((function e(){var a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/rules/").concat(t));case 2:a=e.sent,n=a.data,re(n.title),F(n.regions),ie(n.conditionMatchType),n.conditions.forEach((function(e){switch(e.attribute){case"country":J(e.inValues);break;case"market":D(e.inValues);break;case"issuerSegmentation":ee(e.inValues)}})),(r=n.conditions.find((function(e){return"lang"===e.attribute})))&&Q(r.inValues);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ue()}),[]),Object(n.useEffect)((function(){M&&function(){if(f){var e=f.markets.filter((function(e){var t=e.region;return-1!==M.indexOf(t)})),t=f.issuerSegmentations.filter((function(e){var t=e.region;return-1!==M.indexOf(t)})),a=f.countries.filter((function(e){var t=e.region;return-1!==M.indexOf(t)}));D(V.filter((function(e){var t=f.markets.find((function(t){return t._id===e}));return-1!==M.indexOf(t.region)}))),ee($.filter((function(e){var t=f.issuerSegmentations.find((function(t){return t._id===e}));return-1!==M.indexOf(t.region)}))),J(Y.filter((function(e){var t=f.countries.find((function(t){return t._id===e}));return-1!==M.indexOf(t.region)}))),T({markets:e,issuerSegmentations:t,countries:a})}}()}),[M]),Object(n.useEffect)((function(){Y&&function(){if(f){Q(q.filter((function(e){var t=f.languages.find((function(t){return t._id===e}));return-1!==Y.indexOf(t.country)})));var e=f.languages.filter((function(e){var t=e.country;return-1!==Y.indexOf(t)}));T(Object(U.a)(Object(U.a)({},x),{},{languages:e}))}}()}),[Y]);var me=function(){var a=Object(j.a)(k.a.mark((function a(){var n;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(p(!0),n={title:ne,regions:M,conditionMatchType:se,conditions:[]},V&&V.length>0&&n.conditions.push({attribute:"market",inValues:V}),Y&&Y.length>0&&n.conditions.push({attribute:"country",inValues:Y}),q&&q.length>0&&n.conditions.push({attribute:"lang",inValues:q}),$&&$.length>0&&n.conditions.push({attribute:"issuerSegmentation",inValues:$}),a.prev=6,!t){a.next=14;break}return a.next=10,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/rules/").concat(t),n);case 10:C.b.success("Rule Updated Successfully",3),e.push("/rules"),a.next=18;break;case 14:return a.next=16,w.a.post("".concat("https://rule-engine-demo-server.cfapps.io/","/rules"),n);case 16:C.b.success("Rule Created Successfully",3),e.push("/rules");case 18:a.next=24;break;case 20:a.prev=20,a.t0=a.catch(6),C.b.error(a.t0.message,3),p(!1);case 24:case"end":return a.stop()}}),a,null,[[6,20]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"site-page-header",onBack:function(){return e.push("/rules")},title:"Back to Rules",subTitle:"Manage rules associated with content"}),r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1"}),r.a.createElement(v.a,{flex:"1"},r.a.createElement(z.a,{bordered:!0},r.a.createElement("h2",null,t?"Update Rule":"Create Rule"),r.a.createElement(N.a,{size:"large",spinning:m},r.a.createElement(H,{loading:c,setLoading:s,data:f,setData:b,filteredData:x,setFilteredData:T,selectedRegions:M,setSelectedRegiions:F,selectedMarkets:V,setSelectedMarkets:D,selectedCountries:Y,setSelectedCountries:J,selectedLanguages:q,setSelectedLanguages:Q,selectedIssuerSegmentations:$,setSelectedIssuerSegmentations:ee,title:ne,setTitle:re,matchType:se,setMatchType:ie}),r.a.createElement(P.a,{style:{float:"left",marginTop:"25px"}},r.a.createElement(o.a,{onClick:function(){e.push("/rules")},size:"large"},"Cancel")),r.a.createElement(P.a,{style:{float:"right",marginTop:"25px"}},r.a.createElement(o.a,{disabled:!(M&&M.length>0)||!ne||!se,onClick:me,size:"large",type:"primary"},t?"Update":"Create"))))),r.a.createElement(v.a,{flex:"1"})))},J=a(86),K=a.n(J),W=b.a.Title,q=function(){var e=Object(E.g)(),t=Object(n.useState)(),a=Object(S.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/users"));case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),C.b.error(e.t0.message,3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1",style:{padding:25,background:"#ececec"}},r.a.createElement(W,{type:"primary",level:1,strong:!0},"Users"),r.a.createElement("br",null),r.a.createElement(o.a,{size:"large",type:"primary",onClick:function(){return e.push("/users/create")}},r.a.createElement(y.a,null)," Create User"),r.a.createElement("div",{style:{marginTop:20}},l?l.map((function(e){return r.a.createElement(h.a,{key:e._id},r.a.createElement(v.a,{flex:"1"},r.a.createElement("div",{style:{}},r.a.createElement(f.b,{to:"/users/update/".concat(e._id)},r.a.createElement(z.a,{bordered:!0,style:{width:"100%",marginTop:20},hoverable:!0},r.a.createElement(K.a,{shape:"circle",size:64,src:e.image}),r.a.createElement("h2",{style:{display:"inline-block"}},e.name),r.a.createElement("h3",null,r.a.createElement(R.a,{color:"magenta"},"REGION : ",r.a.createElement("strong",null,e.region.title)),r.a.createElement(R.a,{color:"orange"},"COUNTRY : ",r.a.createElement("strong",null,e.country.title)," "),r.a.createElement(R.a,{color:"green"},"LANGUAGE : ",r.a.createElement("strong",null,e.lang.title)," "),r.a.createElement(R.a,{color:"blue"},"MARKET : ",r.a.createElement("strong",null,e.market.title)," "),r.a.createElement(R.a,{color:"purple"},"SEGMENT : ",r.a.createElement("strong",null,e.issuerSegmentation.title))))))))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}))))))},Q=V.a.Option,X=b.a.Text,Z=function(e){var t=e.region,a=e.setRegion,l=Object(n.useState)([]),c=Object(S.a)(l,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/regions"));case 2:t=e.sent,a=t.data,i(a);case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{type:"primary",strong:!0},"Region"),r.a.createElement("br",null),r.a.createElement(V.a,{value:t,size:"large",style:{width:"100%"},onChange:a,loading:!s.length},r.a.createElement(Q,{value:null},"Select Region"),s&&s.map((function(e){return r.a.createElement(Q,{key:e._id,value:e._id},e.title)}))),r.a.createElement("br",null))},$=V.a.Option,ee=b.a.Text,te=function(e){var t=e.region,a=e.country,l=e.setCountry,c=Object(n.useState)([]),s=Object(S.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){t?(u([]),Object(j.a)(k.a.mark((function e(){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/countries?region=").concat(t));case 2:n=e.sent,r=n.data,u(r),r.find((function(e){return e._id===a}))||l(null);case 7:case"end":return e.stop()}}),e)})))()):u([])}),[t,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{type:"primary",strong:!0},"Country"),r.a.createElement("br",null),r.a.createElement(V.a,{value:a,size:"large",style:{width:"100%"},onChange:l,loading:!i.length},r.a.createElement($,{value:null},"Select Country"),i&&i.map((function(e){return r.a.createElement($,{key:e._id,value:e._id},e.title)}))),r.a.createElement("br",null))},ae=V.a.Option,ne=b.a.Text,re=function(e){var t=e.region,a=e.market,l=e.setMarket,c=Object(n.useState)([]),s=Object(S.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){t?(u([]),Object(j.a)(k.a.mark((function e(){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/markets?region=").concat(t));case 2:n=e.sent,r=n.data,u(r),r.find((function(e){return e._id===a}))||l(null);case 7:case"end":return e.stop()}}),e)})))()):u([])}),[t,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{type:"primary",strong:!0},"Market"),r.a.createElement("br",null),r.a.createElement(V.a,{value:a,size:"large",style:{width:"100%"},onChange:l,loading:!i.length},r.a.createElement(ae,{value:null},"Select Market"),i&&i.map((function(e){return r.a.createElement(ae,{key:e._id,value:e._id},e.title)}))),r.a.createElement("br",null))},le=V.a.Option,ce=b.a.Text,se=function(e){var t=e.region,a=e.issuerSegmentation,l=e.setIssuerSegmentation,c=Object(n.useState)([]),s=Object(S.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){t?(u([]),Object(j.a)(k.a.mark((function e(){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/issuer-segmentations?region=").concat(t));case 2:n=e.sent,r=n.data,u(r),r.find((function(e){return e._id===a}))||l(null);case 7:case"end":return e.stop()}}),e)})))()):u([])}),[t,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{type:"primary",strong:!0},"Issuer Segmentation"),r.a.createElement("br",null),r.a.createElement(V.a,{value:a,size:"large",style:{width:"100%"},onChange:l,loading:!i.length},r.a.createElement(le,{value:null},"Select IssuerSegmentation"),i&&i.map((function(e){return r.a.createElement(le,{key:e._id,value:e._id},e.title)}))),r.a.createElement("br",null))},ie=V.a.Option,ue=b.a.Text,oe=function(e){var t=e.country,a=e.lang,l=e.setLang,c=Object(n.useState)([]),s=Object(S.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){t?(u([]),Object(j.a)(k.a.mark((function e(){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/languages?country=").concat(t));case 2:n=e.sent,r=n.data,u(r),r.find((function(e){return e._id===a}))||l(null);case 7:case"end":return e.stop()}}),e)})))()):u([])}),[t,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{type:"primary",strong:!0},"Language"),r.a.createElement("br",null),r.a.createElement(V.a,{value:a,size:"large",style:{width:"100%"},onChange:l,loading:!i.length},r.a.createElement(ie,{value:null},"Select Lang"),i&&i.map((function(e){return r.a.createElement(ie,{key:e._id,value:e._id},e.title)}))),r.a.createElement("br",null),r.a.createElement("br",null))},me=a(354),pe=b.a.Text,ge=function(e){var t=e.name,a=e.setName,n=e.region,l=e.setRegion,c=e.country,s=e.setCountry,i=e.market,u=e.setMarket,o=e.issuerSegmentation,m=e.setIssuerSegmentation,p=e.lang,g=e.setLang;return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{type:"primary",strong:!0},"Name"),r.a.createElement("br",null),r.a.createElement(T.a,{style:{width:"100%"},value:t,onChange:function(e){return a(e.target.value)},size:"large",placeholder:"Enter Name",prefix:r.a.createElement(me.a,null)}),r.a.createElement("br",null),r.a.createElement(Z,{region:n,setRegion:l}),r.a.createElement(re,{region:n,market:i,setMarket:u}),r.a.createElement(se,{region:n,issuerSegmentation:o,setIssuerSegmentation:m}),r.a.createElement(te,{region:n,country:c,setCountry:s}),r.a.createElement(oe,{country:c,lang:p,setLang:g}))},de=function(){var e=Object(E.g)(),t=Object(E.i)()._id,a=Object(n.useState)(!1),l=Object(S.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!1),u=Object(S.a)(i,2),m=u[0],p=u[1],g=Object(n.useState)(null),d=Object(S.a)(g,2),f=d[0],b=d[1],y=Object(n.useState)(null),O=Object(S.a)(y,2),x=O[0],T=O[1],R=Object(n.useState)(null),M=Object(S.a)(R,2),F=M[0],L=M[1],I=Object(n.useState)(null),U=Object(S.a)(I,2),V=U[0],D=U[1],G=Object(n.useState)(null),B=Object(S.a)(G,2),H=B[0],Y=B[1],J=Object(n.useState)(null),K=Object(S.a)(J,2),W=K[0],q=K[1];Object(n.useEffect)((function(){t&&Object(j.a)(k.a.mark((function e(){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/users/").concat(t));case 4:a=e.sent,n=a.data,Q(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),C.b.error(e.t0.message,3),s(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()}),[t]);var Q=function(e){b(e.name),T(e.region._id),Y(e.market._id),q(e.issuerSegmentation._id),L(e.country._id),D(e.lang._id),s(!1)},X=function(){var a=Object(j.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(p(!0),a.prev=1,!t){a.next=8;break}return a.next=5,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/users/").concat(t),{name:f,region:x,country:F,lang:V,market:H,issuerSegmentation:W});case 5:C.b.success("User Updated Successfully",3),a.next=11;break;case 8:return a.next=10,w.a.post("".concat("https://rule-engine-demo-server.cfapps.io/","/users"),{name:f,region:x,country:F,lang:V,market:H,issuerSegmentation:W});case 10:C.b.success("User Created Successfully",3);case 11:e.push("/users"),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(1),C.b.error(a.t0.message,3),p(!1);case 18:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"site-page-header",onBack:function(){return e.push("/users")},title:"Users"}),r.a.createElement(h.a,null,r.a.createElement(v.a,{span:8}),r.a.createElement(v.a,{span:8},r.a.createElement(z.a,{bordered:!0},r.a.createElement("h2",null,t?"Update User":"Create User"),c?r.a.createElement(_.a,{active:!0,paragraph:{rows:10}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{size:"large",spinning:m},r.a.createElement(ge,{name:f,setName:b,region:x,setRegion:T,country:F,setCountry:L,market:H,setMarket:Y,issuerSegmentation:W,setIssuerSegmentation:q,lang:V,setLang:D}),r.a.createElement(P.a,{style:{float:"left"}},r.a.createElement(o.a,{onClick:function(){e.push("/users")},size:"large"},"Cancel")),r.a.createElement(P.a,{style:{float:"right"}},r.a.createElement(o.a,{disabled:!f||!x||!F||!H||!W||!V,onClick:X,size:"large",type:"primary"},t?"Update":"Create")))))),r.a.createElement(v.a,{span:8})))},Ee=a(195),fe=a(355),be=a(356),he=a(95),ve=a.n(he),ye=b.a.Title,Oe=function(){var e=Object(E.g)(),t=Object(n.useState)(!1),a=Object(S.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(S.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(),g=Object(S.a)(p,2),d=g[0],f=g[1],b=Object(n.useState)(),O=Object(S.a)(b,2),x=O[0],M=O[1],F=Object(n.useState)(),L=Object(S.a)(F,2),I=L[0],A=L[1],P=Object(n.useState)(!1),V=Object(S.a)(P,2),D=V[0],G=V[1];Object(n.useEffect)((function(){Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/contents"));case 3:t=e.sent,a=t.data,f(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),C.b.error(e.t0.message,3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]);var B=function(){var e=Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=17;break}return G(!0),e.prev=2,e.next=5,w.a.post("".concat("https://rule-engine-demo-server.cfapps.io/","/contents"),{title:x});case 5:t=e.sent,a=t.data,f([a].concat(Object(Ee.a)(d))),c(!1),G(!1),M(null),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),C.b.error(e.t0.message,3),G(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I||!I.title){e.next=18;break}return G(!0),e.prev=2,e.next=5,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/contents/").concat(I._id),{title:I.title});case 5:t=e.sent,a=t.data,n=d.map((function(e){return e._id===a._id?a:e})),f(n),m(!1),G(!1),A(null),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),C.b.error(e.t0.message,3),G(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{flex:"1",style:{padding:25,background:"#ececec"}},r.a.createElement(ye,{type:"primary",level:1,strong:!0},"Contents"),r.a.createElement("br",null),r.a.createElement(o.a,{size:"large",type:"primary",onClick:function(){return c(!0)}},r.a.createElement(y.a,null)," Create Content"),r.a.createElement(h.a,{style:{marginTop:20}},d?d.map((function(t){return r.a.createElement(v.a,{span:8},r.a.createElement(z.a,{key:t._id,style:{width:500,marginTop:16},actions:[r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{key:"rules",onClick:function(){return e.push("/contents/".concat(t._id))}})," Rules"),r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{key:"edit",onClick:function(){A(t),m(!0)}}),"Edit")]},r.a.createElement(K.a,{shape:"circle",size:100,src:t.image}),r.a.createElement("h2",{style:{display:"inline-block"}},t.title,r.a.createElement("br",null),t.rules&&t.rules.length>0?r.a.createElement(R.a,{color:"green"},r.a.createElement("strong",null,"Rules Applied")):r.a.createElement(R.a,{color:"red"},r.a.createElement("strong",null,"No Rules")))))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}),r.a.createElement(_.a,{active:!0,avatar:!0,paragraph:{rows:2}}))))),r.a.createElement(ve.a,{title:"Create Content",visible:l,okText:"Create",onOk:B,onCancel:function(){return c(!1)}},r.a.createElement(N.a,{size:"large",spinning:D},r.a.createElement(T.a,{placeholder:"Content Title",value:x,onChange:function(e){return M(e.target.value)}}))),r.a.createElement(ve.a,{title:"Update Content",visible:u,onOk:H,okText:"Update",onCancel:function(){return m(!1)}},r.a.createElement(N.a,{size:"large",spinning:D},I?r.a.createElement(T.a,{placeholder:"Content Title",value:I.title,onChange:function(e){A(Object(U.a)(Object(U.a)({},I),{},{title:e.target.value}))}}):"")))},ke=a(341),je=a(345),Se=a(357),xe=a(358),we=b.a.Title,Ce=b.a.Text,Te=function(){var e=Object(E.g)(),t=Object(E.i)()._id,a=Object(n.useState)(!1),l=Object(S.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(),m=Object(S.a)(i,2),p=m[0],g=m[1],d=Object(n.useState)(!1),f=Object(S.a)(d,2),b=f[0],y=f[1],O=Object(n.useState)(),x=Object(S.a)(O,2),T=x[0],R=x[1],M=function(){var e=Object(j.a)(k.a.mark((function e(a){var n,r,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(n=p.rules.map((function(e){return e._id}))).indexOf(a)){e.next=19;break}return y(!0),n.push(a),e.prev=4,e.next=7,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/contents/").concat(t),{rules:n});case 7:r=e.sent,l=r.data,g(l),y(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),C.b.error(e.t0.message),y(!1);case 17:e.next=20;break;case 19:C.b.warn("The rule you are trying to apply, is already applied to this content",5);case 20:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(k.a.mark((function e(a){var n,r,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),n=(n=p.rules.map((function(e){return e._id}))).filter((function(e){return e!==a})),e.prev=3,e.next=6,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/contents/").concat(t),{rules:n});case 6:r=e.sent,l=r.data,g(l),y(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),C.b.error(e.t0.message),y(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(k.a.mark((function e(a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,w.a.put("".concat("https://rule-engine-demo-server.cfapps.io/","/contents/").concat(t),{ruleMatchType:a});case 4:n=e.sent,r=n.data,g(r),y(!1),C.b.success("Updated: ".concat(a," rule(s) will be matched during content targetting for users!")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),C.b.error(e.t0.message),y(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(t){s(!0);try{Object(j.a)(k.a.mark((function e(){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat("https://rule-engine-demo-server.cfapps.io/","/contents/").concat(t));case 2:a=e.sent,n=a.data,g(n),s(!1);case 6:case"end":return e.stop()}}),e)})))()}catch(e){C.b.error(e.message),s(!1)}}}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"site-page-header",onBack:function(){return e.push("/contents")},title:"Back",subTitle:"Manage rules associated with content"}),r.a.createElement(h.a,null,r.a.createElement(v.a,{span:12},r.a.createElement(z.a,{title:"Content Details",bordered:!0,style:{width:"100%",minHeight:"80vh"}},r.a.createElement(N.a,{size:"large",spinning:c},p?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{span:"6"},r.a.createElement(K.a,{shape:"circle",size:50,src:p.image})),r.a.createElement(v.a,{span:"18"},r.a.createElement(we,{level:4,style:{marginTop:20}},p.title))),r.a.createElement(ke.a,{orientation:"left"},"Rules"),b?r.a.createElement(_.a,{active:!0,paragraph:{rows:20}}):p.rules&&p.rules.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{type:"primary",strong:!0},"Match Type"),r.a.createElement("br",null),r.a.createElement(D.a.Group,{options:[{label:"Match All",value:"ALL"},{label:"Match Any",value:"ANY"}],onChange:function(e){return I(e.target.value)},value:p.ruleMatchType,optionType:"button",buttonStyle:"solid"}),r.a.createElement("br",null),r.a.createElement(je.b,{size:"large",bordered:!0,dataSource:p.rules,renderItem:function(e){return r.a.createElement(je.b.Item,null,r.a.createElement(Ce,null,e.title),r.a.createElement(P.a,null,r.a.createElement(o.a,{onClick:function(){return L(e._id)},title:"Remove Rule",type:"danger",shape:"circle",icon:r.a.createElement(Se.a,null)}),r.a.createElement(o.a,{onClick:function(){return R(e.title)},type:"primary",icon:r.a.createElement(xe.a,null)},"View Dteails")))}})):r.a.createElement(u.a,{status:"404",title:"No Rules Applied",subTitle:"Search rules from sidebar & click to apply",extra:r.a.createElement(we,{level:4},"This content is visible to all by default!")})):""))),r.a.createElement(v.a,{span:12},r.a.createElement(z.a,{title:"Search & Apply Rules",bordered:!0,style:{width:"100%",minHeight:"80vh"}},r.a.createElement("div",{style:{height:"90vh",overflowY:"auto"}},r.a.createElement(F,{search:T,lazy:!0,clickAction:M}))))))},_e=s.a.Header,ze=s.a.Content,Re=s.a.Footer;var Me=function(){var e=Object(E.h)();return r.a.createElement(s.a,{className:"layout"},r.a.createElement(_e,null,r.a.createElement(f.b,{to:"/"},r.a.createElement("div",{className:"logo"},"RULE ENGINE DEMO")),r.a.createElement(i.a,{theme:"dark",mode:"horizontal",selectedKeys:[e.pathname]},r.a.createElement(i.a.Item,{key:"/users"},r.a.createElement(f.c,{to:"/users"},r.a.createElement(m.a,null),r.a.createElement("strong",null,"Users"))),r.a.createElement(i.a.Item,{key:"/rules"},r.a.createElement(f.c,{to:"/rules"},r.a.createElement(p.a,null),r.a.createElement("strong",null,"Rules"))),r.a.createElement(i.a.Item,{key:"/contents"},r.a.createElement(f.c,{to:"/contents"},r.a.createElement(g.a,null),r.a.createElement("strong",null,"Contents"))),r.a.createElement(i.a.Item,{key:"/simulate"},r.a.createElement(f.c,{to:"/simulate"},r.a.createElement(d.a,null),r.a.createElement("strong",null,"Simulate User Session"))))),r.a.createElement(ze,null,r.a.createElement("div",{style:{backgroundColor:"white",minHeight:"100vh"}},r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/simulate"},r.a.createElement(u.a,{status:"500",title:"Working on It",subTitle:"Sit back & Relax, this feature will be added soon",extra:r.a.createElement(f.b,{to:"/"},r.a.createElement(o.a,{type:"primary"},"Back Home"))})),r.a.createElement(E.b,{path:"/contents/:_id"},r.a.createElement(Te,null)),r.a.createElement(E.b,{path:"/contents"},r.a.createElement(Oe,null)),r.a.createElement(E.b,{path:"/rules/create"},r.a.createElement(Y,null)),r.a.createElement(E.b,{path:"/rules/update/:_id"},r.a.createElement(Y,null)),r.a.createElement(E.b,{path:"/rules"},r.a.createElement(I,null)),r.a.createElement(E.b,{path:"/users/create"},r.a.createElement(de,null)),r.a.createElement(E.b,{path:"/users/update/:_id"},r.a.createElement(de,null)),r.a.createElement(E.b,{path:"/users"},r.a.createElement(q,null)),r.a.createElement(E.b,{path:"/"},r.a.createElement(E.a,{to:"/users"}))))),r.a.createElement(Re,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED"))};a(334),a(335);c.a.render(r.a.createElement(f.a,{basename:"/rule-engine-demo-client"},r.a.createElement(Me,null)),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.1a40fb0f.chunk.js.map